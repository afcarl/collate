# This file was autogenerated and will overwrite each time you run travis_pypi_setup.py
language: python
python: 3.5
notifications:
  email: false

branches:
  only:
    - master
    - /^v\d.*$/

services:
  - postgresql
addons:
  postgresql: "9.4"
before_script:
  - createdb test_collate
  - cp tests/config/database.yml{.travis,}
  - python tests/initialize_db.py


env:
  - TOXENV=py35
  - TOXENV=flake8

install: pip install -r requirements_dev.txt

# command to run tests, e.g. python setup.py test
script: tox -e ${TOXENV}

after_success: codecov

# Automatically push tags to PyPI
deploy:
  provider: pypi
  distributions: sdist bdist_wheel
  user: dssg
  password:
    secure: qsSDaamO6ie8lD3IHOIlZdKvV5cQ6gNm/Fj28Zj6RZwFbuUImPuWNd4mc8tM94tYQaRPpYJ3wlJvV5DFE1rj+kWOfSwvaO/LlW4f/tZJPDFcXOufQwFYmXgD1r7wRLltyEV8ei/ZfZc78kz/TxG/00HxiWFbppPrel6yZNuUQGuDlNbmEonwIKwvvlt2dP+W8LKEUYzqOELyhKgQuNHPIV/tSraPP1mBjk/Cu16u/9Gw5ZTaFx3B/CA0IH/4s4jQVZkpJjSgIgIQH4iny/SBGK6aKaWKhb49iECQ9BVE9h6A5oTh9WNJ5poOluT6RVwkAyJybGtkjbfB3YxlYiIqaXRo+thJde2FkL5ON58TGtamllC1vZPetj3+LR5SJ0gnpqyLm8D6rAiV9CbyeED0gq9/eIzZ2eOzIehTe3+Ue1rbt0c9jfxzdd98cqaI+8Y0uYiFXHteX/H4OIQp0vfrZqBZIlVWNgQDgw/Sz/wn/iw9o2sexqiY/bqSL0TsdaPdD4o8wuWIflveeuhc1YPyH/DM6Tx7rDza2orjfmtY1JLEhB9YAQUwD6aWvy4TErFfwxeFWWbFcLFoIKVFfevwsGuXUJQTsNdrXw2KN0mGvDkNIHIlO82kyijfqva64njnCAQEj4ImLSz2BoknvD4+rBRJHmlw/hei2Wc+mzwgAfg=
  true:
    tags: true
    repo: dssg/collate
    condition: $TOXENV == py35
